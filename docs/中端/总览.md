# 总览

中端的任务是接受前端已解析好的抽象语法树，通过**构建器(Builder)**将AST翻译为等价的线性LLVM IR。

LLVM IR 有着非常严格清晰的结构，如下图。

![](https://drinkwater-1325041233.cos.ap-guangzhou.myqcloud.com/imgs/cguserImages)

在 LLVM IR 中，一个 `Module` 由若干 GlobalValue 组成，而一个 GlobalValue 可以是`全局变量（GlobalVariable）`，也可以是`函数（Function）`。一个函数由若干`基本块（BasicBlock）`组成，在基本块内部，则是由若干`指令（Instruction）`组成，也是 LLVM IR 的基本组成。

LLVM IR 中所有类都直接或间接继承自 Value，因此在 LLVM IR 中，有`“一切皆 Value”`的说法。为了表达 Value 之间的引用关系，LLVM IR 中还有一种特殊的 Value 叫做 User，其将其他 Value 作为参数。

在SHIT-compiler中，有关于IR的类均位于`namespace Mir`中，代码位于`src/Mir`或`include/Mir`路径下，之后不再赘述。